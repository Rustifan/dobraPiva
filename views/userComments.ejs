<%-layout("/boilerplate/layout.ejs")%>
<script>const lastPage = <%=numOfPages%></script>

<link rel="stylesheet" href="/css/userComments.css">


<h1>Comments of <%=user.username%>:</h1>

<main>
    <%for(let comment of comments){%>
        <h2 class="commentBeerName"><%=comment.beer.name%>:</h2>
        
        <div class="userComment card">
             <p class="commentMsg"><%=comment.comment%></p>
             <p class="commentDate"><%=comment.timeOfPosting()%></p>
             <% if(comment.user._id==userID || isAdmin) { %>
                <form class="deleteForm"
                    action="/beer/<%=comment.beer._id%>/comments/<%=comment._id%>?_method=DELETE"
                    method="POST">
                    <button class="Button deleteButton">Delete</button>

                </form>
                <%} %>
        </div> 
     <%}%> 
     
</main>
<div class="pages">
                <%if(parseInt(page)!=1){%>
                <a class="first" href="/">first</a>
                <%}%>

                <%if(parseInt(page)-1>0){%>
                <a class="before" href="/">before</a>    
                <%}%>
                  
                <%for(let i = -3; i<4; i++){%>
                    <%if(i+parseInt(page)>0 && i+parseInt(page)<=numOfPages){%>
                    <%if(i===0){%>
                        <b><%=page%></b>
                    <%}else{%>
                    
                        <%if(parseInt(page)+i<parseInt(numOfPages)){%>
                        <a class="page<%=parseInt(page)+i%>" href="/"><%=parseInt(page)+i%></a>
                        <%}%>
                    <%}%>

                    <%}%>
                    
                    
                <%}%>
                <%if(parseInt(page)+1<=parseInt(numOfPages)){%>
                <a class="next" href="/">next</a>    
                <%}%>
                <%if(parseInt(page)<numOfPages-1){%>
                <a class="last" href="/">last</a> 
                <%}%>

            </div>

    <script src="/javascript/changePage.js"></script>
