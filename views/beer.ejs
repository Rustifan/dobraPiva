<%- layout("./boilerplate/layout.ejs") %>

    <link rel="stylesheet" href="/css/beer.css">
    
    <script>let sortCategory = "<%=sortCategory%>";</script>
    <script>let sortOrder = <%=sortOrder%> </script>
    <script>const lastPage = <%=numOfPages%></script>


    <div class="backgroundImage"></div>
    <main class="BeerList">
        <form action="/beer/find">
            
            <label for="find">Find a beer</label>
            <span>
                <input type="text" id="find" name="q">
                <button>Find</button>
            </span>
            
            

            <label for="category">category</label>
            <select name="category" id="category">
                <option value="name">name</option>
                <option value="beerStyle">beer Style</option>
                <option value="location">location</option>
            </select>

        </form>
        
        <h1>Beer list</h1>

        <div class="list">
            <div>
            <a class = "beerTitle">
                <span class="number"></span>
                <span class="beerName"><p>name</p></span>
                <span class="beerRating"><p>rating</p></span>
                <span class="beerStyle"><p>style</p></span>
                <span class="abv"><p>abv</p></span>
                <span class="beerLocation"><p>location</p></span>
            </a>
            </div>
            <% let i = 1; %> 
            <% for (let beer of beers){ %>
                <div class="beerLinkDiv">
                    <a class="beerLink" href="/beer/<%=beer._id%>">
                    <span class="number"><%=i+(page-1)*beerPerPage%>.</span>
                    
                    <span class="beerName"><%=beer.name%> </span>
                    <%if(beer.rating){%> 
                    <span class="beerRating"><%=beer.rating%> </span>
                    <%}else{%>
                    <span class="beerRating">no rating</span>
                    <%} %>  
                    <span class="beerStyle"><%=beer.beerStyle%></span>
                    <span class="abv"><p><%=beer.abv%></p></span>

                    <span class="beerLocation"><%=beer.location.name%></span>
                </a>
                <% i++; %> 
                </div>


                <% } %>
            </div>
            <%if(userID){%>
            <div class="add">
                <a href="/beer/make"><span>Add new beer</span></a>
            </div>
            <%}%>




        </div>
                    
    
    </main>
    <%-include("./partials/pages.ejs")%>
    
    <script src="/javascript/sortBeer.js"></script>
    <script src="/javascript/changePage.js"></script>